rm -rf index.txt serial private certs
touch index.txt
echo 01 > serial
mkdir private certs

#########################
# Create CA certificate #
#########################

# Generate private key for CA certificate
openssl genrsa -out private/ca.key.pem 2048
# Generate CA certificate
openssl req -new -x509 -days 3650 -config configs/ca.cnf -key private/ca.key.pem -out certs/cacert.pem

#############################
# Create Server certificate #
#############################

# Generate private key for client certificate
openssl genrsa -out certs/server.key.pem 2048
# Generate CSR for client certificate
openssl req -new -key certs/server.key.pem -config configs/server.cnf -out certs/server.csr
# Create client certificate
openssl ca -config configs/ca.cnf -extfile configs/server_ext.cnf -days 1650 -notext -batch -in certs/server.csr -out certs/server.cert.pem
